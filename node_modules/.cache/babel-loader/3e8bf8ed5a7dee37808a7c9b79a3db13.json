{"ast":null,"code":"import axios from 'axios';\nimport toast from 'react-hot-toast'; // Actions\n\nvar REQUEST = 'react-devise-sample/auth/REQUEST';\nvar RECEIVED = 'react-devise-sample/auth/RECEIVED';\nvar FAILED = 'react-devise-sample/auth/FAILED';\nvar SIGNOUT = 'react-devise-sample/auth/SIGNOUT'; // Action Creators\n\nexport function authenticate(email, password) {\n  return function (dispatch, getState) {\n    dispatch(startAuthentication());\n    return axios({\n      url: '/user/sign_in',\n      method: 'POST',\n      data: {\n        email: email,\n        password: password\n      }\n    }).then(function (response) {\n      var uid = response.headers['uid'];\n      var client = response.headers['client'];\n      var accessToken = response.headers['access-token'];\n      var expiry = response.headers['expiry'];\n      dispatch(successAuthentication(uid, client, accessToken, expiry));\n    }).then(function (response) {\n      toast.success('Successfully login!');\n    })[\"catch\"](function (error) {\n      toast.error('The username or password is incorrect');\n      dispatch(failAuthentication());\n    });\n  };\n}\nexport function signout() {\n  return function (dispatch, getState) {\n    var _getState = getState(),\n        auth = _getState.auth;\n\n    return axios({\n      url: '/user/sign_out',\n      method: 'DELETE',\n      headers: {\n        'access-token': auth.accessToken,\n        'client': auth.client,\n        'uid': auth.uid\n      }\n    }).then(function (response) {\n      dispatch(doSignout());\n      toast.success('Successfully signout!');\n    })[\"catch\"](function (error) {\n      toast.error('Somthing went wrong!');\n      console.log(error);\n    });\n  };\n}\nexport function expireAuthentication() {\n  return doSignout();\n}\n\nfunction startAuthentication() {\n  return {\n    type: REQUEST\n  };\n}\n\nfunction successAuthentication(uid, client, accessToken, expiry) {\n  return {\n    type: RECEIVED,\n    uid: uid,\n    client: client,\n    accessToken: accessToken,\n    expiry: expiry\n  };\n}\n\nfunction failAuthentication() {\n  return {\n    type: FAILED\n  };\n}\n\nfunction doSignout() {\n  return {\n    type: SIGNOUT\n  };\n} // Reducer\n\n\nexport default function reducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  switch (action.type) {\n    case REQUEST:\n      return Object.assign({}, state, {\n        loading: true\n      });\n\n    case RECEIVED:\n      return Object.assign({}, state, {\n        loading: false,\n        isAuthenticated: true,\n        uid: action.uid,\n        client: action.client,\n        accessToken: action.accessToken,\n        expiry: action.expiry\n      });\n\n    case FAILED:\n      return Object.assign({}, state, {\n        loading: false\n      });\n\n    case SIGNOUT:\n      return Object.assign({}, initialState);\n\n    default:\n      return state;\n  }\n\n  ;\n}\nvar initialState = {\n  loading: false,\n  isAuthenticated: false,\n  client: null,\n  accessToken: null,\n  uid: null,\n  expiry: null\n};","map":{"version":3,"sources":["/Users/shahid/Desktop/recruitment-test-fullstack/app/javascript/components/auth/Auth.js"],"names":["axios","toast","REQUEST","RECEIVED","FAILED","SIGNOUT","authenticate","email","password","dispatch","getState","startAuthentication","url","method","data","then","response","uid","headers","client","accessToken","expiry","successAuthentication","success","error","failAuthentication","signout","auth","doSignout","console","log","expireAuthentication","type","reducer","state","initialState","action","Object","assign","loading","isAuthenticated"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport toast from 'react-hot-toast';\n// Actions\nconst REQUEST = 'react-devise-sample/auth/REQUEST'\nconst RECEIVED = 'react-devise-sample/auth/RECEIVED'\nconst FAILED = 'react-devise-sample/auth/FAILED'\nconst SIGNOUT = 'react-devise-sample/auth/SIGNOUT'\n\n// Action Creators\nexport function authenticate(email, password) {\n  return (dispatch, getState) => {\n    dispatch(startAuthentication())\n    return axios({\n      url: '/user/sign_in',\n      method: 'POST',\n      data: { email, password }\n    }).then(response => {\n      const uid = response.headers['uid']\n      const client = response.headers['client']\n      const accessToken = response.headers['access-token']\n      const expiry = response.headers['expiry']\n      dispatch(successAuthentication(uid, client, accessToken, expiry))\n    }).then(response => {\n      toast.success('Successfully login!')\n    }).catch(error => {\n      toast.error('The username or password is incorrect')\n      dispatch(failAuthentication())\n    })\n  }\n}\n\nexport function signout() {\n  return (dispatch, getState) => {\n    const { auth } = getState()\n    return axios({\n      url: '/user/sign_out',\n      method: 'DELETE',\n      headers: {\n        'access-token': auth.accessToken,\n        'client': auth.client,\n        'uid': auth.uid\n      }\n    }).then(response => {\n      dispatch(doSignout())\n      toast.success('Successfully signout!')\n    }).catch(error => {\n      toast.error('Somthing went wrong!')\n      console.log(error)\n    })\n  }\n}\n\nexport function expireAuthentication() {\n  return doSignout()\n}\n\nfunction startAuthentication() {\n  return { type: REQUEST }\n}\n\nfunction successAuthentication(uid, client, accessToken, expiry) {\n  return { type: RECEIVED, uid, client, accessToken, expiry }\n}\n\nfunction failAuthentication() {\n  return { type: FAILED }\n}\n\nfunction doSignout() {\n  return { type: SIGNOUT }\n}\n\n// Reducer\nexport default function reducer(state = initialState, action = {}) {\n  switch (action.type) {\n    case REQUEST:\n      return Object.assign(\n        {},\n        state,\n        {\n          loading: true\n        }\n      )\n    case RECEIVED:\n      return Object.assign(\n        {},\n        state,\n        {\n          loading: false,\n          isAuthenticated: true,\n          uid: action.uid,\n          client: action.client,\n          accessToken: action.accessToken,\n          expiry: action.expiry\n        }\n      )\n    case FAILED:\n      return Object.assign(\n        {},\n        state,\n        {\n          loading: false\n        }\n      )\n    case SIGNOUT:\n      return Object.assign(\n        {},\n        initialState\n      )\n    default: return state\n  };\n}\n\nconst initialState = {\n  loading: false,\n  isAuthenticated: false,\n  client: null,\n  accessToken: null,\n  uid: null,\n  expiry: null\n}"]},"metadata":{},"sourceType":"module"}